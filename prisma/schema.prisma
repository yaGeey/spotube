generator client {
  provider = "prisma-client"
  output   = "../generated/prisma"
}

generator json {
  provider = "prisma-json-types-generator"
  // output   = "../generated/json-schema"
}

datasource db {
  provider = "sqlite"
}

model SpotifyTrack {
  id            String @id
  title         String
  artist        String // TODO artists
  /// [SpotifyPlaylistItem]
  full_response Json

  youtube_videos YoutubeVideo[]
  playlists      SpotifyPlaylist[]
}

model YoutubeVideo {
  id         String   @id
  updated_at DateTime @default(now()) @updatedAt

  title         String
  artist        String
  duration_ms   Int
  views         Int
  published_at  DateTime
  thumbnail_url String
  /// YtVideoStatistics
  statistics    Json?
  /// [YtFullResponse]
  full_response Json

  spotifyTrack     SpotifyTrack?     @relation(fields: [spotify_id], references: [id])
  spotify_id       String?
  lastFm           LastFM?           @relation(fields: [lastfm_id], references: [id])
  lastfm_id        Int?
  youtubePlaylists YoutubePlaylist[]
}

model LastFM {
  id            Int            @id @default(autoincrement())
  /// [LastFMTrack]
  track         Json?
  /// [LastFMAlbum]
  album         Json?
  /// [LastFMArtist]
  artist        Json?
  youtubeVideos YoutubeVideo[]
}

model YoutubePlaylist {
  id            String         @id
  title         String
  owner         String
  full_response Json // TODO do I need this?
  content       YoutubeVideo[]
}

model SpotifyPlaylist {
  id            String         @id
  snapshot_id   String
  title         String
  owner         String
  thumbnail_url String?
  url           String
  content       SpotifyTrack[]
}
